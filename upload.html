<!DOCTYPE html>
<!-- saved from url=(0033)https://chumanapp.com/upload.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta content="触漫,漫画创作,AVG创作,动漫社区,Z世代,免费漫画,文字游戏,免费小说,我与秋田,王爷的小兔妖,稿费,投稿,游戏制作,成名,出名" name="keywords">
    <meta content="触漫-超好玩的泛二次元创作社区，拥有独特的换装系统和编辑器，用户可轻松定制个性虚拟形象；低门槛创建漫画、漫剧等多样化虚拟内容；加入各种社团，以虚拟身份在触漫进行直播、阅读、交友扩列等活动；还提供了连麦、虚拟形象直播、扭蛋抽卡更多互动玩法。平台目前已经沉淀百万部漫画、点读式小说，在全网持续产出阅读量破十亿的IP作品。培育上百个KOL大触，打通了从UGC到PUGC的IP孵化产业链，并与华丰、洽洽等多个快消品牌达成IP跨界合作。" name="description">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>触漫维权申诉</title>
    <link rel="stylesheet" href="./upload_files/reset.css">
    <link rel="stylesheet" href="./upload_files/upLoad.css">
    <!-- <link rel="stylesheet" href="./css/memorial.css" /> -->
  </head>
  <body>
    <h1 class="seo-logo">
      <img src="./upload_files/chuman_logo.png" alt="触漫logo" style="display: none;">
    </h1>
    <div style="display: none; position: relative; z-index: 2000;">
      <img src="./upload_files/chuman_logo.png" alt="logo" title="触漫-超好玩的泛二次元创作社区">
    </div>
    <div id="tip-area" style="display: none;">
      <span class="animate-show" id="tip-span"></span>
    </div>
    <div class="upLoadBox">
      <div class="header">
        <p>维权申诉书</p>
      </div>
      <div class="dataBox">
        <div class="txtHeader">基本信息</div>
        <div class="JbDataBox">
          <div class="su clearfix">
            <div class="leftBox">
              <p><span class="must">*</span>公司司名称/个人姓名:</p>
            </div>
            <div class="rightBox">
              <input onfocus="removeBorder(this)" onblur="addBorder(this)" class="ipt" id="allName" maxlength="50" type="text">
            </div>
          </div>
          <div class="su clearfix">
            <div class="leftBox">
              <p><span class="must">*</span>手机号码:</p>
            </div>
            <div class="rightBox">
              <input maxlength="11" onfocus="removeBorder(this)" onblur="addBorder(this)" onkeyup="this.value=this.value.replace(/\D/g,&#39;&#39;);" class="ipt" id="phone" type="text">
              <span class="rightSec"><span class="must">*</span>邮箱:</span>
              <input onfocus="removeBorder(this)" onblur="addBorder(this)" class="ipt" id="email" type="text">
            </div>
          </div>
          <div style="height: 100px; padding-top: 30px;" class="su clearfix">
            <div class="leftBox">
              <p><span class="must">*</span>通信地址:</p>
            </div>
            <div class="rightBox">
              <textarea maxlength="100" onfocus="removeBorder(this)" onblur="addBorder(this)" style="height: 100px; margin-top: -30px;" class="ipt" id="adress" type="text"></textarea>
              <span class="rightSec"><span class="must">*</span>邮编:</span>
              <input onfocus="removeBorder(this)" onblur="addBorder(this)" onkeyup="this.value=this.value.replace(/\D/g,&#39;&#39;)" class="ipt" id="zipCode" type="text">
            </div>
          </div>
        </div>

        <div class="txtHeader">侵权作品</div>
        <div class="JbDataBox">
          <div class="su clearfix">
            <div class="leftBox">
              <p><span class="must">*</span>作品名称:</p>
            </div>
            <div class="rightBox">
              <input maxlength="50" onfocus="removeBorder(this)" onblur="addBorder(this)" class="ipt" id="workName" type="text">
            </div>
          </div>

          <div class="su clearfix">
            <div class="leftBox">
              <p>作者昵称:</p>
            </div>
            <div class="rightBox">
              <input maxlength="50" class="ipt" id="authorName" type="text">
            </div>
          </div>

          <div class="su clearfix">
            <div class="leftBox">
              <p><span class="must">*</span>侵权证据截图:</p>
            </div>
            <div class="rightBox">
              <div id="showImg">
                <!--<div class="evidenceImgBox"><span class="precent">50%</span><img src="https://www.2345.com/right/homepage/img/block1701171030/tab1/20180222101123.jpg" alt=""></div>-->
                <!--<div class="evidenceImgBox"><span class="precent">50%</span><img src="https://www.2345.com/right/homepage/img/block1701171030/tab1/20180222101123.jpg" alt=""></div>-->
                <!--<div class="evidenceImgBox"><span class="precent">50%</span><img src="https://www.2345.com/right/homepage/img/block1701171030/tab1/20180222101123.jpg" alt=""></div>-->
                <!--<div class="evidenceImgBox"><span class="precent">50%</span><img src="https://www.2345.com/right/homepage/img/block1701171030/tab1/20180222101123.jpg" alt=""></div>-->
                <!--<div class="evidenceImgBox"><span class="precent">50%</span><img src="https://www.2345.com/right/homepage/img/block1701171030/tab1/20180222101123.jpg" alt=""></div>-->
                <!--<div class="evidenceImgBox"><span class="precent">50%</span><img src="https://www.2345.com/right/homepage/img/block1701171030/tab1/20180222101123.jpg" alt=""></div>-->
              </div>
              <div id="evidenceBtn" style="z-index: 1;">
                <div class="add_pic"></div>
                <div class="txtShow">
                  <p>上传</p>
                  <p>图片</p>
                </div>
              </div>
              <div class="upLoadText">（至少上传一张截图）</div>
            <div id="html5_1elcuqdtv13s12q97q81bfg12ng4_container" class="moxie-shim moxie-shim-html5" style="position: absolute; top: 0px; left: 20px; width: 146px; height: 146px; overflow: hidden; z-index: 0;"><input id="html5_1elcuqdtv13s12q97q81bfg12ng4" type="file" style="font-size: 999px; opacity: 0; position: absolute; top: 0px; left: 0px; width: 100%; height: 100%;" accept=""></div></div>
          </div>
          <div class="su clearfix">
            <div class="leftBox">
              <p><span class="must">*</span>侵权情况详述:</p>
            </div>
            <div class="rightBox" style="position: relative;">
              <textarea onfocus="removeBorder(this)" onblur="addBorder(this)" placeholder="请指出具体的侵权部分，人物、剧情等" class="ipt" id="msg" type="text"></textarea>
              <span style="
                  position: absolute;
                  right: 20px;
                  bottom: 10px;
                  color: #999;
                  font-size: 16px;
                ">不少于20字</span>
            </div>
          </div>
        </div>

        <div class="txtHeader">权属证明资料</div>
        <div class="qxzmBox">
          <div class="text_box">
            <p>请上传能证明版权所有的资料哦，以便更好地维权！</p>
            <p>
              证明资料包括但不限于版权证书、公开发表证明材料、创作手稿、创作时间戳、作品备案证书等。
            </p>
            <p>资料可以拍照或者扫描，但要保证信息清晰可见哦！</p>
          </div>
        </div>
        <div class="su clearfix">
          <div class="leftBox">
            <p><span class="must">*</span>版权资料证明:</p>
          </div>
          <div class="rightBox">
            <div id="visiImg">
              <!--<div class="visiImgBox"><span class="precent">50%</span><img src="https://www.2345.com/right/homepage/img/block1701171030/tab1/20180222101123.jpg" alt=""></div>-->
              <!--<div class="visiImgBox"><span class="precent">50%</span><img src="https://www.2345.com/right/homepage/img/block1701171030/tab1/20180222101123.jpg" alt=""></div>-->
              <!--<div class="visiImgBox"><span class="precent">50%</span><img src="https://www.2345.com/right/homepage/img/block1701171030/tab1/20180222101123.jpg" alt=""></div>-->
              <!--<div class="visiImgBox"><span class="precent">50%</span><img src="https://www.2345.com/right/homepage/img/block1701171030/tab1/20180222101123.jpg" alt=""></div>-->
              <!--<div class="visiImgBox"><span class="precent">50%</span><img src="https://www.2345.com/right/homepage/img/block1701171030/tab1/20180222101123.jpg" alt=""></div>-->
              <!--<div class="visiImgBox"><span class="precent">50%</span><img src="https://www.2345.com/right/homepage/img/block1701171030/tab1/20180222101123.jpg" alt=""></div>-->
            </div>
            <div id="visiBtn" style="z-index: 1;">
              <div class="add_pic"></div>
              <div class="txtShow">
                <p>上传</p>
                <p>图片</p>
              </div>
            </div>
            <div class="upLoadText">（至少上传一张截图）</div>
          <div id="html5_1elcuqdu21edepmc10tl17ve2mj7_container" class="moxie-shim moxie-shim-html5" style="position: absolute; top: 0px; left: 20px; width: 146px; height: 146px; overflow: hidden; z-index: 0;"><input id="html5_1elcuqdu21edepmc10tl17ve2mj7" type="file" style="font-size: 999px; opacity: 0; position: absolute; top: 0px; left: 0px; width: 100%; height: 100%;" accept=""></div></div>
        </div>
      </div>
      <a id="submitBtn">提交</a>
      <div class="modalBox">
        <div class="modalTextbox">
          <p>是否保证，以上陈诉和提供的相关资料 皆是真实、有效和合法的？</p>
          <a class="cancel">取消</a>
          <a class="comFirm">确保</a>
        </div>
      </div>
    </div>

    <script src="./upload_files/jquery-1.11.1.min.js.下载"></script>
    <script src="./upload_files/qiniuBig.js.下载"></script>
    <script>
      //        var name,phone,email,address,zipCode,workName,author,msg;
      //        var picOne = new Array;
      //        var picTwo = new Array;
      //        var arr = new Array() ;
      function show_tip(tipWord, callBack) {
        var timeout0 = false
        var timeout1 = false

        function time0() {
          if (timeout0) return
          $('#tip-span').addClass('animate-hide')
          $('aa').removeAttr()
        }

        function time1() {
          if (timeout1) return
          $('#tip-area').hide()
          $('#tip-span').removeClass('animate-hide')
          if (callBack) callBack()
        }

        $('#tip-span').html(tipWord)
        $('#tip-area').show()
        $('#tip-area').click(function () {
          $('#tip-area').hide()
          timeout0 = true
          timeout1 = true
          $('#tip-span').removeClass('animate-hide')
          if (callBack) callBack()
        })

        setTimeout(time0, 1000)
        setTimeout(time1, 2000)
      }

      //清除红边框
      function removeBorder(e) {
        $(e).removeClass('hasNull')
      }
      //添加红边框
      function addBorder(e) {
        if ($(e).val() == '') {
          $(e).addClass('hasNull')
        }
        //            console.log($(e)[0].id);

        if ($(e)[0].id == 'phone') {
          if ($('#phone').val() != '') {
            var re = /^1\d{10}$/
            if (re.test($('#phone').val())) {
            } else {
              show_tip('手机号码不正确')
              $(e).addClass('hasNull')
              return false
            }
          }
        }
        if ($(e)[0].id == 'email') {
          if ($('#email').val() != '') {
            var re = /^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/
            if (re.test($('#email').val())) {
            } else {
              show_tip('邮箱不正确')
              $(e).addClass('hasNull')
              return false
            }
          }
        }
        if ($(e)[0].id == 'zipCode') {
          if ($('#zipCode').val() != '') {
            var re = /^[1-9][0-9]{5}$/
            if (re.test($('#zipCode').val())) {
            } else {
              show_tip('邮编不正确')
              $(e).addClass('hasNull')
              return false
            }
          }
        }

        if ($(e)[0].id == 'msg') {
          if ($('#msg').val() != '') {
            if ($('#msg').val().length < 20) {
              show_tip('侵权情况详述不少于20字')
              $(e).addClass('hasNull')
              return false
            }
          }
        }
      }
      $(function () {
        //            全局数组
        var topPicList = new Array()
        var bottomPicList = new Array()
        var topBtnStatus,
          bottomBtnStatus = false

        //不保存退出
        window.onbeforeunload = function () {
          if (
            $('#allName').val() != '' ||
            $('#phone').val() != '' ||
            $('#email').val() != '' ||
            $('#adress').val() != '' ||
            $('#zipCode').val() != '' ||
            $('#workName').val() != '' ||
            $('#authorName').val() != '' ||
            $('#msg').val() != '' ||
            topPicList.length > 0 ||
            bottomPicList.length > 0
          ) {
            return ''
          }
        }

        function checkEmail(str) {
          var re = /^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/
          if (re.test(str)) {
            alert('正确')
          } else {
            show_tip('邮箱不正确')
            return false
          }
        }

        $('#submitBtn').click(function () {
          $('input').each(function (index, e) {
            if ($(e).attr('id') != 'authorName') {
              if ($(e).val() == '') {
                $(e).addClass('hasNull')
              }
            }
          })
          $('textarea').each(function (index, e) {
            if ($(e).val() == '') {
              $(e).addClass('hasNull')
            }
          })

          if ($('#allName').val() == '') {
            show_tip('有未填信息')
            return false
          }
          if ($('#phone').val() == '') {
            show_tip('有未填信息')
            return false
          } else {
            var re = /^1\d{10}$/
            if (re.test($('#phone').val())) {
            } else {
              show_tip('手机号码不正确')
              return false
            }
          }

          if ($('#email').val() == '') {
            show_tip('有未填信息')
            return false
          } else {
            var re = /^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/
            if (re.test($('#email').val())) {
            } else {
              show_tip('邮箱不正确')
              return false
            }
          }
          if ($('#adress').val() == '') {
            show_tip('有未填信息')
            return false
          }
          if ($('#zipCode').val() == '') {
            show_tip('有未填信息')
            return false
          } else {
            var re = /^[1-9][0-9]{5}$/
            if (re.test($('#zipCode').val())) {
            } else {
              show_tip('邮编不正确')
              return false
            }
          }

          if ($('#workName').val() == '') {
            show_tip('有未填信息')
            return false
          }

          if ($('#msg').val() == '') {
            show_tip('有未填信息')
            return false
          } else {
            if ($('#msg').val().length < 20) {
              show_tip('侵权情况详述不少于20字')
              return false
            }
          }
          if (topPicList.length <= 0) {
            show_tip('证据截图至少上传一张图片')
            return false
          }
          if (bottomPicList.length <= 0) {
            show_tip('侵权截图至少上传一张图片')
            return false
          }

          $('.modalBox').fadeIn(500)
        })
        function commit() {
          $.ajax({
            //                url:'http://webstaging.chumanapp.com/rights',
            url: 'http://webofficial.chumanapp.com/rights',
            type: 'post',
            dataType: 'JSON',
            data: {
              name: $('#allName').val(),
              phone: $('#phone').val(),
              e_mail: $('#email').val(),
              address: $('#adress').val(),
              postal_number: $('#zipCode').val(),
              works_name: $('#workName').val(),
              nick_name: $('#authorName').val(),
              tort_details: $('#msg').val(),
              tort_pic: topPicList,
              copyright_pic: bottomPicList,
            },
            success: function (res) {
              //                    res = JSON.parse(res)
              //                    console.log(res);
              if (res.status == 'ok') {
                $('#allName').val('')
                $('#phone').val('')
                $('#email').val('')
                $('#adress').val('')
                $('#zipCode').val('')
                $('#workName').val('')
                $('#authorName').val('')
                $('#msg').val('')
                topPicList = []
                bottomPicList = []
                $('.modalBox').fadeOut(500)
                show_tip('提交成功')
                var a = setTimeout(function () {
                  clearTimeout(a)
                  //                            window.location.href='http://www.chumanapp.com';
                }, 1000)
              } else {
                $('.modalBox').fadeOut(500)
                show_tip(res.message.message)
              }
            },
            error: function (err) {
              console.log(err)
              show_tip('提交失败')
              $('.modalBox').fadeOut(500)
            },
          })
        }

        var upToken

        function loadQiNiu() {
          upLoadImg('evidenceBtn', 1)
          upLoadImg('visiBtn', 2)
        }
        loadQiNiu()

        $('.cancel').click(function () {
          $('.modalBox').fadeOut(500)
        })

        $('.comFirm').click(function () {
          commit()
        })

        function upLoadImg(btn, type) {
          var topPicLength = 0
          var bottomPicLength = 0
          var ar = new Array()
          var newar = new Array()
          var uploader = Qiniu.uploader({
            runtimes: 'html5,flash,html4', // 上传模式，依次退化
            browse_button: btn, // 上传选择的点选按钮，必需
            // 在初始化时，uptoken，uptoken_url，uptoken_func三个参数中必须有一个被设置
            // 切如果提供了多个，其优先级为uptoken > uptoken_url > uptoken_func
            // 其中uptoken是直接提供上传凭证，uptoken_url是提供了获取上传凭证的地址，如果需要定制获取uptoken的过程则可以设置uptoken_func
            // uptoken : '<Your upload token>', // uptoken是上传凭证，由其他程序生成
            //                 uptoken_url: 'http://coco.mallecomics.com/api/qiniu/qiNiu.php',         // Ajax请求uptoken的Url，强烈建议设置（服务端提供）
            uptoken_func: function () {
              // 在需要获取uptoken时，该方法会被调用
              // do something
              var token
              $.ajax({
                url: 'http://webofficial.chumanapp.com/qiniu',
                //                         url:'http://webstaging.chumanapp.com/qiniu',
                dataType: 'json',
                async: false,
              }).done(function (res) {
                //                         console.log(res);
                token = res.data.uptoken
              })
              return token
            },
            get_new_uptoken: true, // 设置上传文件的时候是否每次都重新获取新的uptoken
            // downtoken_url: '/downtoken',
            // Ajax请求downToken的Url，私有空间时使用，JS-SDK将向该地址POST文件的key和domain，服务端返回的JSON必须包含url字段，url值为该文件的下载地址
            // unique_names: true,              // 默认false，key为文件名。若开启该选项，JS-SDK会为每个文件自动生成key（文件名）
            // save_key: true,                  // 默认false。若在服务端生成uptoken的上传策略中指定了sava_key，则开启，SDK在前端将不对key进行任何处理
            domain: 'chumanofficial.chumanapp.com', // bucket域名，下载资源时用到，必需
            // container: 'container',             // 上传区域DOM ID，默认是browser_button的父元素

            max_file_size: '4mb', // 最大文件体积限制
            multi_selection: false, //单文件上传
            //flash_swf_url: 'path/of/plupload/Moxie.swf',  //引入flash，相对路径
            max_retries: 3, // 上传失败最大重试次数
            // dragdrop: true,                     // 开启可拖曳上传
            // drop_element: 'container',          // 拖曳上传区域元素的ID，拖曳文件或文件夹后可触发上传
            chunk_size: '4mb', // 分块上传时，每块的体积
            //                uptoken_url: "/api/qiniu/qiNiu.php",
            //                uptoken: upToken,
            //                 uptoken: 'mtF-pUwD2-KBeVZs0hcTaRouMJcI8k5teJeWvdLZ:xpVUQ0XGkuHcfA_4D81tmS8faLI=:eyJzY29wZSI6ImNodW1hbm9mZmljaWFsIiwiZGVhZGxpbmUiOjE1MjE4MDY1Nzl9',
            auto_start: true, // 选择文件后自动上传，若关闭需要自己绑定事件触发上传

            init: {
              FilesAdded: function (up, files) {
                plupload.each(files, function (file) {
                  // 文件添加进队列后，处理相关的事情
                  //                            console.log('filetype: ' + file.type);
                  if (
                    file.type == 'image/jpeg' ||
                    file.type == 'image/jpg' ||
                    file.type == 'image/png' ||
                    file.type == 'image/gif'
                  ) {
                    //                                console.log('type:' + file.type);
                    var size = file.size / 1024 / 1024
                    var name = file.name
                    if (name.indexOf('#') != -1) {
                      show_tip('文件名不能带有特殊字符')
                      up.removeFile(file)
                      return false
                    }
                    if (size > 4) {
                      show_tip('图片大小不超过4M')
                      up.removeFile(file)
                      return false
                    }
                    // isUpload =true;
                    // file.album_name=album_name;
                    //var progress = new FileProgress(file, 'fsUploadProgress');
                    //progress.setStatus("等待...");
                    //progress.bindUploadCancel(up);
                  } else {
                    show_tip('上传类型不正确')
                    // isUpload = false;
                    up.removeFile(file)
                    return false
                  }
                })
              },
              BeforeUpload: function (up, file) {
                // 每个文件上传前，处理相关的事情
                if (topPicLength > 5) {
                  up.removeFile(file)
                  $('#evidenceBtn').hide()
                  show_tip('图片不超过6张')
                  return false
                }
                if (bottomPicLength > 5) {
                  up.removeFile(file)
                  $('#visiBtn').hide()
                  show_tip('图片不超过6张')
                  return false
                }
                ar.push(topPicLength)
                newar.push(bottomPicLength)
                if (type == 1) {
                  var str =
                    '<div id="rimg_' +
                    topPicLength +
                    '" class="evidenceImgBox"><span class="precent">' +
                    file.percent +
                    '</span></div>'
                  topBtnStatus = true
                  if (topBtnStatus) {
                    $('#evidenceBtn').find('.txtShow').hide()
                    $('#evidenceBtn').find('.add_pic').show()
                  }
                  $('#showImg').append(str)
                } else {
                  var str =
                    '<div id="newrimg_' +
                    bottomPicLength +
                    '"  class="visiImgBox"><span class="precent">' +
                    file.percent +
                    '</span></div>'
                  bottomBtnStatus = true
                  if (bottomBtnStatus) {
                    $('#visiBtn').find('.txtShow').hide()
                    $('#visiBtn').find('.add_pic').show()
                  }
                  $('#visiImg').append(str)
                }
              },
              UploadProgress: function (up, file) {
                // 每个文件上传时，处理相关的事情
                //                                $('#percent').html(file.percent);
                //                                var str ='<div class="evidenceImgBox"><span class="precent">'+file.percent+'</span></div>'
                if (type == 1) {
                  $('.evidenceImgBox').find('.precent').html(file.percent)
                } else {
                  $('.visiImgBox').find('.precent').html(file.percent)
                }
              },
              FileUploaded: function (up, file, info) {
                console.log('上传成功')

                // 每个文件上传成功后，处理相关的事情
                // 其中info.response是文件上传成功后，服务端返回的json，形式如：
                // {
                //    "hash": "Fh8xVqod2MQ1mocfI4S4KpRL6D98",
                //    "key": "gogopher.jpg"
                //  }
                // 查看简单反馈
                var domain = up.getOption('domain')
                var res = JSON.parse(info.response)
                //                        console.log(info);
                //                        console.log(file);
                var sourceLink = domain + '/' + res.key //获取上传成功后的文件的Url
                if (type == 1) {
                  $('.evidenceImgBox')
                    .eq(topPicLength)
                    .append('<img src="http://' + sourceLink + '" />')
                    .find('.precent')
                    .hide()
                  $('.evidenceImgBox')
                    .eq(topPicLength)
                    .find('img')
                    .on('load', function () {
                      var w = $(this)[0].naturalWidth
                      var h = $(this)[0].naturalHeight
                      //                                console.log(w,h);
                      if (w > h) {
                        //                                    console.log('横图');
                        $(this).addClass('Himg')
                        $(this).removeClass('Cimg')
                        $(this).removeClass('Zimg')
                      } else if (w < h) {
                        //                                    console.log('长图');
                        $(this).addClass('Cimg')
                        $(this).removeClass('Himg')
                        $(this).removeClass('Zimg')
                      } else if (w == h) {
                        //                                    console.log('正方形图');
                        $(this).addClass('Zimg')
                        $(this).removeClass('Cimg')
                        $(this).removeClass('Himg')
                      }
                    })
                  newupLoadImg('rimg_' + ar[topPicLength], upToken, 1)
                  topPicLength++
                  if (topPicLength >= 6) {
                    $('#evidenceBtn').hide()
                  }
                  var saveLink = 'http://' + sourceLink
                  topPicList.push(res.key)

                  //                            console.log(topPicList);
                } else {
                  $('.visiImgBox')
                    .eq(bottomPicLength)
                    .append('<img src="http://' + sourceLink + '" />')
                    .find('.precent')
                    .hide()
                  $('.visiImgBox')
                    .eq(bottomPicLength)
                    .find('img')
                    .on('load', function () {
                      var w = $(this)[0].naturalWidth
                      var h = $(this)[0].naturalHeight
                      //                                console.log(w,h);

                      if (w > h) {
                        //                                    console.log('横图');
                        $(this).addClass('Himg')
                        $(this).removeClass('Cimg')
                        $(this).removeClass('Zimg')
                      } else if (w < h) {
                        //                                    console.log('长图');
                        $(this).addClass('Cimg')
                        $(this).removeClass('Himg')
                        $(this).removeClass('Zimg')
                      } else if (w == h) {
                        //                                    console.log('正方形图');
                        $(this).addClass('Zimg')
                        $(this).removeClass('Cimg')
                        $(this).removeClass('Himg')
                      }
                    })
                  newupLoadImg('newrimg_' + newar[bottomPicLength], upToken, 2)
                  bottomPicLength++
                  if (bottomPicLength >= 6) {
                    $('#visiBtn').hide()
                  }
                  var saveLink = 'http://' + sourceLink
                  bottomPicList.push(res.key)
                  //                            console.log(bottomPicList);
                }
              },
              Error: function (up, err, errTip) {
                //上传出错时，处理相关的事情
              },
              UploadComplete: function () {
                //队列文件处理完毕后，处理相关的事情
              },
              Key: function (up, file) {
                // 若想在前端对每个文件的key进行个性化处理，可以配置该函数
                // 该配置必须要在unique_names: false，save_key: false时才生效
                file = file.name.split('.')
                var key =
                  'chumanOfficial/' +
                  Date.parse(new Date()) +
                  parseInt(Math.random() * 1000) +
                  '-' +
                  file[0] +
                  '.' +
                  file[1]
                return key
              },
            },
          })
        }

        function newupLoadImg(id, type) {
          //                console.log(id)
          var newtopPicLength = 0

          var Q2 = new QiniuJsSDK()
          var uploader2 = Q2.uploader({
            runtimes: 'html5,flash,html4', // 上传模式，依次退化
            browse_button: id, // 上传选择的点选按钮，必需
            // 在初始化时，uptoken，uptoken_url，uptoken_func三个参数中必须有一个被设置
            // 切如果提供了多个，其优先级为uptoken > uptoken_url > uptoken_func
            // 其中uptoken是直接提供上传凭证，uptoken_url是提供了获取上传凭证的地址，如果需要定制获取uptoken的过程则可以设置uptoken_func
            // uptoken : '<Your upload token>', // uptoken是上传凭证，由其他程序生成
            // uptoken_url: '/uptoken',         // Ajax请求uptoken的Url，强烈建议设置（服务端提供）
            uptoken_func: function () {
              // 在需要获取uptoken时，该方法会被调用
              // do something
              var token
              $.ajax({
                url: 'http://webofficial.chumanapp.com/qiniu',
                //                             url:'http://webstaging.chumanapp.com/qiniu',
                dataType: 'json',
                async: false,
              }).done(function (res) {
                token = res.data.uptoken
              })
              return token
            },
            get_new_uptoken: true, // 设置上传文件的时候是否每次都重新获取新的uptoken
            multi_selection: false, //单文件上传
            // downtoken_url: '/downtoken',
            // Ajax请求downToken的Url，私有空间时使用，JS-SDK将向该地址POST文件的key和domain，服务端返回的JSON必须包含url字段，url值为该文件的下载地址
            // unique_names: true,              // 默认false，key为文件名。若开启该选项，JS-SDK会为每个文件自动生成key（文件名）
            // save_key: true,                  // 默认false。若在服务端生成uptoken的上传策略中指定了sava_key，则开启，SDK在前端将不对key进行任何处理
            domain: 'chumanofficial.chumanapp.com', // bucket域名，下载资源时用到，必需
            // container: 'container',             // 上传区域DOM ID，默认是browser_button的父元素
            max_file_size: '100mb', // 最大文件体积限制
            //flash_swf_url: 'path/of/plupload/Moxie.swf',  //引入flash，相对路径
            max_retries: 0, // 上传失败最大重试次数
            // dragdrop: true,                     // 开启可拖曳上传
            // drop_element: 'container',          // 拖曳上传区域元素的ID，拖曳文件或文件夹后可触发上传
            chunk_size: '4mb', // 分块上传时，每块的体积
            //                    uptoken_url: "/api/qiniu/qiNiu.php",
            //                    uptoken_url: "http://coco.mallecomics.com/api/qiniu/qiNiu.php",
            //                    uptoken: token,
            // uptoken: 'zP2mfRlsHVEXR4tHAza-FUTgWEqLMGqmcM98VAtd:hqyeQXxGMeVjK8QclLunVOncpiU=:eyJzY29wZSI6Im1hbGxlc3RhZ2luZyIsImRlYWRsaW5lIjoxNTE5MzcwMDU1fQ==',
            auto_start: true, // 选择文件后自动上传，若关闭需要自己绑定事件触发上传

            init: {
              FilesAdded: function (up, files) {
                plupload.each(files, function (file) {
                  // 文件添加进队列后，处理相关的事情
                  //                                console.log('filetype: ' + file.type);
                  if (
                    file.type == 'image/jpeg' ||
                    file.type == 'image/jpg' ||
                    file.type == 'image/png' ||
                    file.type == 'image/gif'
                  ) {
                    //                                    console.log('type:' + file.type);
                    var size = file.size / 1024 / 1024
                    var name = file.name
                    if (name.indexOf('#') != -1) {
                      show_tip('文件名不能带有特殊字符')
                      up.removeFile(file)
                      return false
                    }
                    if (size > 4) {
                      show_tip('图片大小不超过4M')
                      up.removeFile(file)
                      return false
                    }
                  } else {
                    show_tip('上传类型不正确')
                    // isUpload = false;
                    up.removeFile(file)

                    return false
                  }
                })
              },
              BeforeUpload: function (up, file) {
                // 每个文件上传前，处理相关的事情
                //var str ='<div id="rimg_'+topPicLength+'" class="evidenceImgBox"><span class="precent">'+file.percent+'</span></div>';

                $('#' + id)
                  .find('.precent')
                  .show()
              },
              UploadProgress: function (up, file) {
                // 每个文件上传时，处理相关的事情
                //                                $('#percent').html(file.percent);
                //                                var str ='<div class="evidenceImgBox"><span class="precent">'+file.percent+'</span></div>'
                //                            $('.evidenceImgBox').find('.precent').html(file.percent)
                $('#' + id)
                  .find('.precent')
                  .html(file.percent)
              },
              FileUploaded: function (up, file, info) {
                console.log('上传成功')

                newtopPicLength++
                // 每个文件上传成功后，处理相关的事情
                // 其中info.response是文件上传成功后，服务端返回的json，形式如：
                // {
                //    "hash": "Fh8xVqod2MQ1mocfI4S4KpRL6D98",
                //    "key": "gogopher.jpg"
                //  }
                // 查看简单反馈
                var domain = up.getOption('domain')
                var res = JSON.parse(info.response)
                //                            console.log(info);
                //                            console.log(file);
                var sourceLink = domain + '/' + res.key //获取上传成功后的文件的Url

                if (type == 1) {
                  var index = id.split('rimg_')[1]
                  //                                console.log(id)
                  var saveLink = 'http://' + sourceLink
                  topPicList.splice(index, 1, res.key)
                  //                                console.log(topPicList);
                } else {
                  var index = id.split('newrimg_')[1]
                  //                                console.log(index)
                  var saveLink = 'http://' + sourceLink
                  bottomPicList.splice(index, 1, res.key)
                  //                                console.log(bottomPicList);
                }

                $('#' + id)
                  .find('img')
                  .attr('src', 'http://' + sourceLink)
                $('#' + id)
                  .find('.precent')
                  .hide()
              },
              Error: function (up, err, errTip) {
                //上传出错时，处理相关的事情
              },
              UploadComplete: function () {
                //队列文件处理完毕后，处理相关的事情
              },
              Key: function (up, file) {
                // 若想在前端对每个文件的key进行个性化处理，可以配置该函数
                // 该配置必须要在unique_names: false，save_key: false时才生效
                file = file.name.split('.')
                var key =
                  'chumanOfficial/' +
                  Date.parse(new Date()) +
                  parseInt(Math.random() * 1000) +
                  '-' +
                  file[0] +
                  '.' +
                  file[1]
                return key
              },
            },
          })
        }
      })
    </script>
    <div style="display: none;">
      <script src="./upload_files/stat.php" language="JavaScript"></script>
    </div>
  

</body></html>